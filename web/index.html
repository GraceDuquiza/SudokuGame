<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <!-- Mobile-friendly layout -->
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- CSP must appear before any external resources -->
        <meta http-equiv="Content-Security-Policy"
            content="default-src 'self'; script-src 'self'; 
                    style-src 'self'; img-src 'self' data:; object-src 'none'; 
                    base-uri 'self'; upgrade-insecure-requests">

        <!-- Optional privacy hardening -->
        <meta name="referrer" content="no-referrer">

        <title>Sudoku â€” Learn While You Play</title>

        <!-- Styles -->
        <link rel="stylesheet" href="./style.css" />

        <!-- Icons -->
        <link rel="icon" href="data:," />
        <link rel="icon" type="image/png" sizes="192x192" href="./icon192.png" />
        <link rel="apple-touch-icon" href="./icon192.png" />

        <!-- PWA -->
        <link rel="manifest" href="./manifest.json" />
        <meta name="theme-color" content="#22c55e" />

        <!-- SEO -->
        <meta name="description" content="Kid-friendly Sudoku with real table grid. Includes hints, notes, undo/redo, timer, mistakes, and challenge levels.">
    

    </head>

    <body>
    <!-- ==========================================================
        HEADER
    ========================================================== -->
    <header class="app-header">
        <h1>Sudoku â€” Learn While You Play</h1>
        <p class="subtitle">Fun puzzles that get harder as you level up ğŸ® EG/AS</p>
    </header>

    <!-- ==========================================================
        APP LAYOUT
        Desktop: 2 columns (.left = gameplay, .right = sidebar)
        Mobile:  1 column â€” order is controlled by CSS.
        NOTE: For browsers without :has(), we rely on the helper
                classes .challenge-card and .board-card below.
    ========================================================== -->
    <main class="app">
        <!-- =========================
            LEFT COLUMN (Gameplay)
        ========================== -->
        <section class="left">

        <!-- Challenge label (helper class for non-:has() fallback) -->
        <div class="card challenge-card">
            <h2 id="challengeLabel">ğŸŒ± Beginner Challenge â€” Puzzle 1 of 20</h2>
        </div>

        <!-- Timer -->
        <div class="timer card" aria-label="Timer controls">
            <span id="clock" class="timer-clock" aria-live="polite">00:00</span>
            <div class="timer-actions">
            <button id="btn-pause"  type="button" title="Pause (Space)">Pause</button>
            <button id="btn-resume" type="button" title="Resume (Space)" hidden>Resume</button>
            <button id="btn-stop"   type="button" title="Stop (Shift+S)">Stop</button>
            </div>
        </div>

        <!-- Toolbar (compact; buttons sized to text) -->
        <div class="toolbar card" aria-label="Game controls">
            <div class="row">
            <label for="difficulty">Choose Challenge</label>
            <select id="difficulty" aria-label="Difficulty">
                <option value="beginner">ğŸŒ± Beginner (4Ã—4)</option>
                <option value="intermediate">â­ Intermediate (9Ã—9)</option>
                <option value="advanced">ğŸ”¥ Advanced (9Ã—9)</option>
                <option value="expert">ğŸ† Expert (9Ã—9)</option>
            </select>

            <button id="newGame" class="primary" type="button">ğŸ² New Puzzle</button>
            <button id="restartGame" type="button" title="Restart same puzzle">ğŸ”„ Restart</button>
            </div>

            <div class="row">
            <button id="hintBtn" type="button">ğŸ’¡ Hint</button>
            <button id="notesToggle" class="toggly" aria-pressed="false" type="button">ğŸ“ Notes: Off</button>
            <button id="undoBtn" type="button" title="Undo">â†©ï¸ Undo</button>
            <button id="redoBtn" type="button" title="Redo">â†ªï¸ Redo</button>
            <button id="eraseBtn" type="button" title="Erase cell">âŒ Erase</button>
            </div>
        </div>

        <!-- Board (helper class for non-:has() fallback) -->
        <div class="card board-card">
            <table id="gridTable" class="sudoku" role="grid" aria-label="Sudoku grid"></table>
        </div>

        <!-- Numpad (buttons injected by JS) -->
        <div class="numpad card" aria-label="Number pad">
            <div id="keys" class="keys"></div>
        </div>
        </section>

        <!-- =========================
            RIGHT COLUMN (Sidebar)
        ========================== -->
        <aside class="right">

        <!-- Status -->
        <div class="card status" aria-label="Game status">
            <div class="stats">
            <div><span>Score:</span> <strong id="score">0</strong></div>
            <div><span>Best time:</span> <strong id="bestTime">â€”</strong></div>
            <div><span>Hints:</span> <strong id="hintsUsed">0</strong></div>
            <div>
                <span>Mistakes:</span>
                <strong id="mistakes">0</strong>
                <span id="lives" aria-label="Lives">â¤â¤â¤â¤â¤</span>
            </div>
            </div>
            <button id="clearProgress" class="danger danger--sm" type="button">ğŸ—‘ï¸ Clear Save</button>
        </div>

        <!-- Coach -->
        <div class="card coach">
            <h2>Coach</h2>
            <p id="coachMsg" aria-live="polite">
            ğŸ‘† Tap a box, then tap a number below.
            Not sure? Turn on â€œNotesâ€ to try small numbers first!
            </p>

            <details class="learn-box">
            <summary>ğŸ“˜ What youâ€™ll learn today â¬‡</summary>
            <ul>
                <li><strong>Main Rule:</strong> Each row, column, and box must have all numbers once. No repeats!</li>
                <li><strong>Easy Spot:</strong> If only one number fits in a box, thatâ€™s the answer.</li>
                <li><strong>Only Choice:</strong> In some rows/columns/boxes, only one cell can hold a number. Thatâ€™s the right spot!</li>
            </ul>
            </details>
        </div>

        <!-- Tips -->
        <div class="card tips">
            <h2>Tips</h2>
            <ul>
            <li>ğŸ² <strong>New Puzzle</strong> â€” Get a brand-new board. Pick your level first in â€œChoose Challenge.â€</li>
            <li>ğŸ”„ <strong>Restart</strong> â€” Start this same puzzle over from the beginning.</li>
            <li>â†©ï¸ <strong>Undo</strong> â€” Go back one move. You can press it many times.</li>
            <li>â†ªï¸ <strong>Redo</strong> â€” Go forward again if you undid something by mistake.</li>
            <li>ğŸ§½ <strong>Erase</strong> â€” Clear the selected box. (You canâ€™t erase the gray starter numbers.)</li>
            <li>ğŸ“ <strong>Notes</strong> â€” Write tiny helper numbers in a box. Tap a number to add or remove it. Turn Notes off to place the big number.</li>
            <li>ğŸ’¡ <strong>Hint</strong> â€” Show one helpful move. You get up to 5 hints each puzzle.</li>
            <li>â±ï¸ <strong>Timer</strong> â€” Shows how long you play. You can Pause, Resume, or Stop.</li>
            <li>ğŸ¯ <strong>Highlight</strong> â€” Tap a filled box or a number button to light up all of that number on the board.</li>
            <li>ğŸ—‘ï¸ <strong>Clear Save</strong> â€” Delete all saved progress and scores. Use this only if you want to start fresh.</li>
            <li>ğŸ—£ï¸ <strong>Coach</strong> â€” Read messages here for tips, cheers, and warnings about mistakes.</li>
            <li>â¤ï¸ <strong>Hearts</strong> â€” You have 5 hearts. A wrong number takes one heart. No hearts = Game Over.</li>
            </ul>
        </div>
        </aside>
    </main>

    <!-- ==========================================================
        FOOTER
    ========================================================== -->
    <footer class="app-footer">
        <small>Made for learning by GDO â¤â¤â¤</small>
    </footer>

    <!-- Game logic (defer = faster first paint on mobile) -->
    <script src="./sudoku.js" defer></script>

    <noscript>This game needs JavaScript to run.</noscript>
</body>
</html>
